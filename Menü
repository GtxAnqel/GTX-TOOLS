#!/bin/bash

# Renkler
red='\033[31m'
green='\033[32m'
yellow='\033[33m'
cyan='\033[36m'
reset='\033[0m'

# Başlık
clear
figlet "GTX TOOL" | lolcat
echo -e "${cyan}GtxAnqel tarafından geliştirildi. Eğitim amaçlıdır.${reset}"
echo ""

# Ana Menü
while true; do
    echo -e "${yellow}──────────────── MENÜ ────────────────${reset}"
    echo -e "${green}[1] IP Tracer"
    echo -e "[2] Kullanıcı Adı Taraması"
    echo -e "[3] Link Güvenlik Analizi"
    echo -e "[4] Sistem Bilgileri"
    echo -e "[5] Çıkış${reset}"
    echo ""
    read -p "➤ Bir seçenek girin [1-5]: " secim

    case $secim in
        1)
            clear
            figlet "GTX IP-TRACER" | lolcat
            echo -e "${yellow}KULLANIM: GTX-MN (kılavuz) | GTX-M (kendi IP) | IP adresi girin${reset}"
            read -p "🔍 IP adresi ya da komut: " girdi

            function bilgi_goster {
                ip="$1"
                echo -e "${cyan}Bilgiler alınıyor...${reset}"
                data=$(curl -s "http://ip-api.com/json/$ip?fields=status,country,regionName,city,district,zip,lat,lon,message")

                status=$(echo "$data" | grep -oP '(?<="status":")[^"]+')
                if [[ "$status" != "success" ]]; then
                    msg=$(echo "$data" | grep -oP '(?<="message":")[^"]+')
                    echo -e "${red}Hata: $msg${reset}"
                    continue
                fi

                country=$(echo "$data" | grep -oP '(?<="country":")[^"]+')
                region=$(echo "$data" | grep -oP '(?<="regionName":")[^"]+')
                city=$(echo "$data" | grep -oP '(?<="city":")[^"]+')
                district=$(echo "$data" | grep -oP '(?<="district":")[^"]+')
                zip=$(echo "$data" | grep -oP '(?<="zip":")[^"]+')
                lat=$(echo "$data" | grep -oP '(?<="lat":)[^,]+')
                lon=$(echo "$data" | grep -oP '(?<="lon":")[^,}]+')

                [[ -z "$district" ]] && district="Bilinmiyor"
                [[ -z "$zip" ]] && zip="Bilinmiyor"

                echo -e "${green}IP Bilgileri:${reset}"
                echo -e "  Ülke     : $country"
                echo -e "  Bölge    : $region"
                echo -e "  Şehir    : $city"
                echo -e "  İlçe     : $district"
                echo -e "  Posta Kodu : $zip"
                echo -e "  Konum    : $lat,$lon"
                echo -e "  Harita   : https://maps.google.com/?q=$lat,$lon"
                echo ""
            }

            if [[ "$girdi" == "GTX-M" ]]; then
                ip=$(curl -s ifconfig.me)
                bilgi_goster "$ip"
            elif [[ "$girdi" == "GTX-MN" ]]; then
                continue
            elif [[ "$girdi" =~ ^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
                bilgi_goster "$girdi"
            else
                echo -e "${red}Geçersiz giriş.${reset}"
            fi
            read -p "↩️ Enter ile menüye dön..."
            clear
            ;;
        2)
            clear
            figlet "GTX USERSCAN" | lolcat
            echo -e "${cyan}Kullanıcı adının sosyal medya hesaplarında kullanılıp kullanılmadığını tarar.${reset}"
            read -p "🔍 Kullanıcı adı girin: " kullanici

            platformlar=(
                "Instagram:https://www.instagram.com/"
                "Twitter:https://www.twitter.com/"
                "GitHub:https://www.github.com/"
                "Facebook:https://www.facebook.com/"
                "TikTok:https://www.tiktok.com/@"
                "Reddit:https://www.reddit.com/user/"
                "YouTube:https://www.youtube.com/@"
            )

            for site in "${platformlar[@]}"; do
                isim=$(echo "$site" | cut -d":" -f1)
                url=$(echo "$site" | cut -d":" -f2-)
                tam_url="${url}${kullanici}"
                status=$(curl -s -o /dev/null -w "%{http_code}" "$tam_url")

                if [[ "$status" == "200" || "$status" == "302" ]]; then
                    echo -e "${green}[✓] $isim bulundu: $tam_url${reset}"
                else
                    echo -e "${red}[✗] $isim bulunamadı.${reset}"
                fi
                sleep 0.2
            done
            echo -e "${cyan}Tarama tamamlandı.${reset}"
            read -p "↩️ Enter ile menüye dön..."
            clear
            ;;
        3)
            clear
            figlet "GTX LINKSCAN" | lolcat
            echo -e "${cyan}Bir URL’nin HTTPS, domain, durum kodunu analiz eder.${reset}"
            read -p "🔗 URL girin: " url
            domain=$(echo "$url" | awk -F/ '{print $3}')

            if echo "$url" | grep -q "^https://"; then
                echo -e "${green}[✓] HTTPS kullanılıyor.${reset}"
            else
                echo -e "${yellow}[!] HTTPS yok. Risk olabilir.${reset}"
            fi

            echo -e "${cyan}[+] Domain bilgisi:${reset}"
            whois $domain | grep -Ei "Registrar|Creation Date" | head -n 5

            httpcode=$(curl -s -o /dev/null -w "%{http_code}" "$url")
            if [[ "$httpcode" == "200" ]]; then
                echo -e "${green}[✓] Link çalışıyor.${reset}"
            else
                echo -e "${red}[✗] Link sorunlu. Kod: $httpcode${reset}"
            fi
            read -p "↩️ Enter ile menüye dön..."
            clear
            ;;
        4)
            clear
            figlet "GTX SYSTEM" | lolcat
            echo -e "${cyan}Cihaz bilgileri:${reset}\n"
            echo -e "${yellow}• OS         :${reset} $(uname -o)"
            echo -e "${yellow}• Kernel     :${reset} $(uname -r)"
            echo -e "${yellow}• Mimari     :${reset} $(uname -m)"
            echo -e "${yellow}• Kullanıcı  :${reset} $USER"
            echo -e "${yellow}• IP         :${reset} $(curl -s ifconfig.me)"
            echo -e "${yellow}• Depolama   :${reset}"
            df -h | grep '^/data' || df -h | grep '/dev/root'
            read -p "↩️ Enter ile menüye dön..."
            clear
            ;;
        5)
            echo -e "${cyan}Çıkış yapılıyor. Hoşçakal.${reset}"
            exit 0
            ;;
        *)
            echo -e "${red}Geçersiz seçim.${reset}"
            ;;
    esac
done